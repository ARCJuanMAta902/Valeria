<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitaci√≥n Personalizada</title>
    
    <style>
        /* üí° CONFIGURACI√ìN DE FUENTE AMOROSA (Instrucci√≥n Personalizada) */
        @font-face {
            font-family: 'Amorosa';
            /* ¬°VERIFICA ESTAS RUTAS! Deben apuntar a donde guardaste tu fuente. */
            src: url('Amorosa-Regular.woff2') format('woff2'),
                 url('Amorosa-Regular.woff') format('woff'),
                 url('Amorosa-Regular.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        /* CONFIGURACI√ìN BASE DEL BODY */
        body {
            margin: 0;
            padding: 0;
            display: flex; 
            justify-content: center;
            align-items: center; 
            min-height: 100vh;
            background-color: black; 
            position: relative;
            font-family: Arial, sans-serif; 
            color: white;
        }

        /* VIDEO DE FONDO */
        #background-video {
            width: 100vw;
            height: 100vh;
            object-fit: contain; 
            z-index: -100;
        }

        /* Estilos del BOT√ìN INVISIBLE - Control de inicio, pausa e √≠cono */
        #start-button {
            position: absolute;
            z-index: 100; 
            width: 100vw;
            height: 100vh;
            background-color: transparent; 
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px; 
            color: rgba(255, 255, 255, 0.7); 
            transition: opacity 0.3s;
        }

        /* Clase para ocultar el √≠cono de control */
        #start-button.hidden {
             opacity: 0;
        }

        /* ************************************************* */
        /* ESTILOS DEL CONTADOR DIN√ÅMICO */
        /* ************************************************* */

        #countdown-block {
            position: absolute;
            top: 20%; /* Posici√≥n vertical ajustada (20% superior) */
            left: 50%;
            z-index: 50; 
            
            /* ESTADO BASE (SALIDA HACIA ARRIBA) */
            transform: translateX(-50%) translateY(-100vh); 
            opacity: 0; 
            visibility: hidden; 
            
            padding: 0; 
            background-color: transparent; 
            box-shadow: none; 
            
            text-align: center; 
            transition: opacity 2.1s ease-out, transform 2.1s ease-out; 
        }
        
        /* Estado ACTIVO: Totalmente visible y en el centro */
        #countdown-block.is-visible {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0); 
        }
        
        /* Ocultar el t√≠tulo "LOS QUINCE" */
        #countdown-block > span:first-child { 
            display: none !important; 
        }

        /* Contenedor principal de los n√∫meros (Horizontal) */
        .countdown { 
            display: flex; 
            gap: 5px; 
            justify-content: center; 
            align-items: center; 
            margin-top: 0; 
        }
        
        /* Contenedor de cada cifra (ahora en l√≠nea) */
        .time-segment { 
            padding: 0; 
            line-height: 1.1; 
            display: flex; 
            align-items: center; 
        }
        
        /* D√çGITOS DEL CONTADOR (Amorosa y #888994) */
        .time-value { 
            font-family: 'Amorosa', serif; 
            font-size: 5em; 
            font-weight: normal; 
            color: #888994; 
            display: inline-block;
            min-width: unset; 
            text-align: center; 
            line-height: 1.1;
        }
        
        /* SEPARADORES (Amorosa y #888994) */
        .separator { 
            font-family: 'Amorosa', serif;
            font-size: 5em; 
            font-weight: normal;
            color: #888994; 
            margin: 0 0px; 
            line-height: 1.1;
        }
        
        /* MENSAJE FINAL (Amorosa y #888994) */
        #message {
            font-family: 'Amorosa', serif;
            font-size: 2em;
            color: #888994; 
            margin-top: 20px;
        }

        /* Ocultar los labels "D√çAS", "HORAS", etc. */
        .time-label { 
            display: none; 
        }
        
        /* RESPONSIVIDAD M√ìVIL */
        @media (max-width: 650px) {
            .time-value, .separator {
                font-size: 2.8em; 
            }
             .countdown {
                gap: 5px; 
            }
        }
    </style>
</head>
<body>

    <button id="start-button" onclick="handleVideoControl()">‚ñ∂</button> 
    
    <video playsinline id="background-video"> 
        Tu navegador no soporta el formato de video.
    </video>

    <div id="countdown-block" class="from-right"> 
        <span>LOS QUINCE</span> 
        
        <div class="countdown">
            
            <div class="time-segment">
                <span class="time-value" id="days">0</span>
                <span class="time-label">D√çAS</span>
            </div>
            <span class="separator">:</span>

            <div class="time-segment">
                <span class="time-value" id="hours">0</span>
                <span class="time-label">HORAS</span>
            </div>
            <span class="separator">:</span>

            <div class="time-segment">
                <span class="time-value" id="minutes">0</span>
                <span class="time-label">MINUTOS</span>
            </div>
            <span class="separator">:</span>

            <div class="time-segment">
                <span class="time-value" id="seconds">0</span>
                <span class="time-label">SEGUNDOS</span>
            </div>
            
        </div>
        <p id="message" style="display: none;"></p>
    </div>

    <script>
        const video = document.getElementById('background-video');
        const startButton = document.getElementById('start-button');
        const countdownBlock = document.getElementById('countdown-block');
        
        // --- CONFIGURACI√ìN DEL VIDEO POR TEL√âFONO ---
        
        // 1. Obtener el par√°metro 'tel' (tel√©fono) de la URL
        const urlParams = new URLSearchParams(window.location.search);
        const telefonoID = urlParams.get('tel'); 

        let videoFileName;
        
        // 2. Mapeo: Asignar un n√∫mero de tel√©fono a un nombre de archivo de video (extra√≠do de su lista de invitados)
        const videoMap = {
            '04249248414': 'Invitaci√≥n Javier Salas.mp4',
            '04120892089': 'Invitaci√≥n Vivenes P√©rez.mp4',
            '04144215508': 'Invitaci√≥n Arias Vivenes.mp4',
            '04143949592': 'Invitaci√≥n Ismery Urbaez.mp4',
            '04128279166': 'Invitaci√≥n Blancos Salas.mp4',
            '04120962195': 'Invitaci√≥n Sabina.mp4',
            '04121171726': 'Invitaci√≥n Navarros Salas.mp4',
            '04248299641': 'Invitaci√≥n Felix y Nathalia.mp4',
            '04122177673': 'Invitaci√≥n Pedro Salas.mp4',
            '04166849607': 'Invitaci√≥n Urbaez Barreto.mp4',
            '04248439912': 'Invitaci√≥n Anais Azocar.mp4',
            '04261964980': 'Invitaci√≥n Dennys Febres.mp4',
            '04264065089': 'Invitaci√≥n Bello Cerne√±o.mp4',
            '04126956138': 'Invitaci√≥n Agust√≠n Urbaez y Sra.mp4',
            '04249401717': 'Invitaci√≥n Petra Meneses.mp4',
            '04167912021': 'Invitaci√≥n Joel Bello.mp4',
            '04121163511': 'Invitaci√≥n Arturo y Alejandra.mp4',
            '04249045556': 'Invitaci√≥n Vicdelia y Coromoto.mp4',
            '04266910440': 'Invitaci√≥n Sobeida.mp4',
            '04128706487': 'Invitaci√≥n Marina.mp4',
            '04249514004': 'Invitaci√≥n Cristian.mp4',
            '04128849070': 'Invitaci√≥n Nazareth.mp4',
            '04249273875': 'Invitaci√≥n Hermano Santil.mp4',
            '04246778565': 'Invitaci√≥n Juan Espluga.mp4',
            '04249503300': 'Invitaci√≥n Santiago de Freites.mp4',
            '04124173728': 'Invitaci√≥n Josu√© y Rafael.mp4',
            '04122157205': 'Invitaci√≥n Milka y Melissa.mp4'
            // Si el nombre de su video por defecto es "Invitaci√≥n 15 Valeria.mp4",
            // no necesita a√±adirlo aqu√≠.
        };
        
        // 3. L√≥gica de selecci√≥n de video
        if (telefonoID && videoMap[telefonoID]) {
            videoFileName = videoMap[telefonoID];
        } else {
            // Video por defecto si no se especifica el tel√©fono o no se encuentra
            videoFileName = 'Invitaci√≥n 15 Valeria.mp4'; 
        }

        // 4. Asignar el video seleccionado al elemento <video>
        video.innerHTML = `<source src="${videoFileName}" type="video/mp4">`;
        
        // --- RESTO DEL C√ìDIGO (L√≥gica de control y contador) ---
        
        const LOW_VOLUME = 0.3; 
        const tiempoAparicion = 27.3; 
        const duracionVisible = 7.7;  
        // La fecha del evento es el S√°bado 13 de Diciembre (de 2025) a las 8:00 PM (20:00:00)
        const countdownDate = new Date("Dec 13, 2025 20:00:00").getTime(); 

        // FUNCI√ìN UNIFICADA: Maneja Inicio, Pausa, Reanudaci√≥n y Reinicio
        function handleVideoControl() {
            if (video.ended) {
                video.currentTime = 0;
                countdownBlock.style.transition = 'none'; 
                countdownBlock.classList.remove('is-visible', 'to-left');
                countdownBlock.classList.add('from-right');
                document.getElementById("message").style.display = 'none';
                updateCountdown(); 
                attemptPlay();
            } else if (video.paused) {
                attemptPlay();
            } else {
                video.pause();
                startButton.classList.remove('hidden'); 
                startButton.innerHTML = '‚ùö‚ùö';
            }
        }
        
        function attemptPlay() {
            video.volume = LOW_VOLUME; 
            video.playbackRate = 1.0; 
            
            const playPromise = video.play();

            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    startButton.classList.add('hidden'); 
                    startButton.innerHTML = ''; 
                })
                .catch(error => {
                    video.muted = true;
                    video.play();
                    startButton.classList.add('hidden');
                    startButton.innerHTML = '';
                    console.warn("Audio bloqueado. Reproduciendo video sin sonido.");
                });
            }
        }

        video.addEventListener('ended', function() {
            startButton.classList.remove('hidden'); 
            startButton.innerHTML = '‚ü≥'; 
        });

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = countdownDate - now;
            
            if (distance > 0) {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById("days").innerHTML = days;
                document.getElementById("hours").innerHTML = String(hours).padStart(2, '0');
                document.getElementById("minutes").innerHTML = String(minutes).padStart(2, '0');
                document.getElementById("seconds").innerHTML = String(seconds).padStart(2, '0');
            } else {
                clearInterval(countdownInterval); 
                countdownBlock.classList.add('is-visible'); 
                document.querySelector('#countdown-block .countdown').innerHTML = ''; 
                const messageElement = document.getElementById("message");
                messageElement.style.display = 'block';
                messageElement.innerHTML = "¬°ES HOY! ¬°Comencemos la Celebraci√≥n! ü•≥";
            }
        }

        updateCountdown(); 
        const countdownInterval = setInterval(updateCountdown, 1000);

        video.addEventListener('timeupdate', function() {
            const tiempoFin = tiempoAparicion + duracionVisible;
            const tiempoActual = video.currentTime;

            if (tiempoActual >= tiempoAparicion && tiempoActual < tiempoFin) {
                countdownBlock.style.transition = 'opacity 1.9s ease-out, transform 1.9s ease-out'; 
                countdownBlock.classList.remove('from-right', 'to-left'); 
                countdownBlock.classList.add('is-visible'); 
            } else {
                if (tiempoActual >= tiempoFin) {
                    countdownBlock.classList.remove('is-visible'); 
                    countdownBlock.classList.add('to-left'); 
                } else if (tiempoActual < tiempoAparicion) {
                    if (!countdownBlock.classList.contains('from-right')) {
                        countdownBlock.style.transition = 'none'; 
                        countdownBlock.classList.remove('is-visible', 'to-left');
                        countdownBlock.classList.add('from-right');
                    }
                }
            }
        });
        
    </script>

</body>
</html>

