<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Ajustado XV A√±os</title>
    
    <style>
        /* üí° CONFIGURACI√ìN DE FUENTE AMOROSA */
        @font-face {
            font-family: 'Amorosa';
            /* ¬°VERIFICA ESTAS RUTAS! Deben apuntar a donde guardaste tu fuente. */
            src: url('Amorosa-Regular.woff2') format('woff2'),
                 url('Amorosa-Regular.woff') format('woff'),
                 url('Amorosa-Regular.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        /* CONFIGURACI√ìN BASE DEL BODY */
        body {
            margin: 0;
            padding: 0;
            display: flex; 
            justify-content: center;
            align-items: center; 
            min-height: 100vh;
            background-color: black; 
            position: relative;
            font-family: Arial, sans-serif; 
            color: white;
        }

        /* VIDEO DE FONDO */
        #background-video {
            width: 100vw;
            height: 100vh;
            object-fit: contain; 
            z-index: -100;
        }

        /* Estilos del BOT√ìN INVISIBLE - Control de inicio, pausa e √≠cono */
        #start-button {
            position: absolute;
            z-index: 100; 
            width: 100vw;
            height: 100vh;
            background-color: transparent; 
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px; 
            color: rgba(255, 255, 255, 0.7); 
            transition: opacity 0.3s;
        }

        /* üí• CORRECCI√ìN: Quitamos pointer-events: none; para que SIEMPRE capture el clic */
        #start-button.hidden {
             opacity: 0;
             /* üí° DEBEMOS DEJAR EL PUNTERO ACTIVO para que pueda PAUSAR/REANUDAR */
        }

        /* ************************************************* */
        /* ESTILOS DEL CONTADOR DIN√ÅMICO (Animaci√≥n Vertical) */
        /* ************************************************* */

        #countdown-block {
            position: absolute;
            top: 20%; /* Posici√≥n vertical ajustada */
            left: 50%;
            z-index: 50; 
            
            /* ESTADO BASE (SALIDA HACIA ARRIBA) */
            transform: translateX(-50%) translateY(-100vh); 
            opacity: 0; 
            visibility: hidden; 
            
            padding: 0; 
            background-color: transparent; 
            box-shadow: none; 
            
            text-align: center; 
            transition: opacity 2.1s ease-out, transform 2.1s ease-out; 
        }
        
        /* Estado ACTIVO: Totalmente visible y en el centro */
        #countdown-block.is-visible {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0); 
        }
        
        /* CLASE DE ENTRADA: Viene DESDE ARRIBA */
        #countdown-block.from-right {
             transform: translateX(-50%) translateY(-100vh);
             opacity: 0; 
             visibility: hidden; 
        }

        /* CLASE DE SALIDA: Desaparece HACIA ABAJO */
        #countdown-block.to-left {
             transform: translateX(-50%) translateY(100vh); 
             opacity: 0; 
             visibility: hidden; 
        }

        /* Ocultar el t√≠tulo "LOS QUINCE" */
        #countdown-block > span:first-child { 
            display: none !important; 
        }

        /* Contenedor principal de los n√∫meros (Horizontal) */
        .countdown { 
            display: flex; 
            gap: 5px; 
            justify-content: center; 
            align-items: center; 
            margin-top: 0; 
        }
        
        /* Contenedor de cada cifra (ahora en l√≠nea) */
        .time-segment { 
            padding: 0; 
            line-height: 1.1; 
            display: flex; 
            align-items: center; 
        }
        
        /* D√çGITOS DEL CONTADOR (Amorosa y #888994) */
        .time-value { 
            font-family: 'Amorosa', serif; 
            font-size: 5em; 
            font-weight: normal; 
            color: #888994; 
            display: inline-block;
            min-width: unset; 
            text-align: center; 
            line-height: 1.1;
        }
        
        /* SEPARADORES (Amorosa y #888994) */
        .separator { 
            font-family: 'Amorosa', serif;
            font-size: 5em; 
            font-weight: normal;
            color: #888994; 
            margin: 0 0px; 
            line-height: 1.1;
        }
        
        /* MENSAJE FINAL (Amorosa y #888994) */
        #message {
            font-family: 'Amorosa', serif;
            font-size: 2em;
            color: #888994; 
            margin-top: 20px;
        }

        /* Ocultar los labels "D√çAS", "HORAS", etc. */
        .time-label { 
            display: none; 
        }
        
        /* RESPONSIVIDAD M√ìVIL */
        @media (max-width: 650px) {
            .time-value, .separator {
                font-size: 2.8em; 
            }
             .countdown {
                gap: 5px; 
            }
        }
    </style>
</head>
<body>

    <button id="start-button" onclick="handleVideoControl()">‚ñ∂</button> 
    
    <video playsinline id="background-video"> 
        <source src="Invitaci√≥n 15 Valeria.mp4" type="video/mp4">
        Tu navegador no soporta el formato de video.
    </video>

    <div id="countdown-block" class="from-right"> 
        <span>LOS QUINCE</span> 
        
        <div class="countdown">
            
            <div class="time-segment">
                <span class="time-value" id="days">0</span>
                <span class="time-label">D√çAS</span>
            </div>
            <span class="separator">:</span>

            <div class="time-segment">
                <span class="time-value" id="hours">0</span>
                <span class="time-label">HORAS</span>
            </div>
            <span class="separator">:</span>

            <div class="time-segment">
                <span class="time-value" id="minutes">0</span>
                <span class="time-label">MINUTOS</span>
            </div>
            <span class="separator">:</span>

            <div class="time-segment">
                <span class="time-value" id="seconds">0</span>
                <span class="time-label">SEGUNDOS</span>
            </div>
            
        </div>
        <p id="message" style="display: none;"></p>
    </div>

    <script>
        const video = document.getElementById('background-video');
        const startButton = document.getElementById('start-button');
        const countdownBlock = document.getElementById('countdown-block');
        
        const LOW_VOLUME = 0.3; 
        
        // --- CONFIGURACI√ìN DE TIEMPOS ---
        const tiempoAparicion = 27.3; 
        const duracionVisible = 7.7;  
        // ----------------------------------
        
        // FECHA DEL EVENTO
        const countdownDate = new Date("Dec 13, 2025 20:00:00").getTime(); 

        // üí• FUNCI√ìN UNIFICADA: Maneja Inicio, Pausa, Reanudaci√≥n y Reinicio
        function handleVideoControl() {
            // 1. Si el video termin√≥, es REINICIO
            if (video.ended) {
                video.currentTime = 0;
                // Reiniciar el estado del contador visualmente
                countdownBlock.style.transition = 'none'; 
                countdownBlock.classList.remove('is-visible', 'to-left');
                countdownBlock.classList.add('from-right');
                document.getElementById("message").style.display = 'none';
                updateCountdown(); 
                
                // Intentar reproducir (pasa al paso 3)
                attemptPlay();
                
            // 2. Si el video est√° PAUSADO, es REANUDACI√ìN
            } else if (video.paused) {
                attemptPlay();
                
            // 3. Si el video est√° en REPRODUCCI√ìN, es PAUSA
            } else {
                video.pause();
                // Mostrar el √≠cono de pausa
                startButton.classList.remove('hidden'); 
                startButton.innerHTML = '‚ùö‚ùö';
            }
        }
        
        // Funci√≥n auxiliar para manejar la reproducci√≥n y el autojuego
        function attemptPlay() {
            video.volume = LOW_VOLUME; 
            video.playbackRate = 1.0; 
            
            const playPromise = video.play();

            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // Ocultar el √≠cono cuando se reproduce con √©xito
                    startButton.classList.add('hidden'); 
                    startButton.innerHTML = ''; 
                })
                .catch(error => {
                    // Fallback si el navegador bloquea el auto-play con audio
                    video.muted = true;
                    video.play();
                    startButton.classList.add('hidden');
                    startButton.innerHTML = '';
                    console.warn("Audio bloqueado. Reproduciendo video sin sonido.");
                });
            }
        }

        // --- ASIGNAR EVENTOS DE CONTROL ---
        
        // üí• IMPORTANTE: Escuchar el evento 'ended' solo para cambiar el √≠cono a Reiniciar
        video.addEventListener('ended', function() {
            startButton.classList.remove('hidden'); 
            startButton.innerHTML = '‚ü≥'; // √çcono de Reiniciar
        });

        // --- L√ìGICA DEL CONTADOR (Sin cambios funcionales) ---

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = countdownDate - now;
            
            if (distance > 0) {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById("days").innerHTML = days;
                document.getElementById("hours").innerHTML = String(hours).padStart(2, '0');
                document.getElementById("minutes").innerHTML = String(minutes).padStart(2, '0');
                document.getElementById("seconds").innerHTML = String(seconds).padStart(2, '0');
                
            } else {
                clearInterval(countdownInterval); 
                
                countdownBlock.classList.add('is-visible'); 
                document.querySelector('#countdown-block .countdown').innerHTML = ''; 
                const messageElement = document.getElementById("message");
                messageElement.style.display = 'block';
                messageElement.innerHTML = "¬°ES HOY! ¬°Comencemos la Celebraci√≥n! ü•≥";
            }
        }

        updateCountdown(); 
        const countdownInterval = setInterval(updateCountdown, 1000);

        
        // --- CONTROL DE ANIMACI√ìN DEL CONTADOR EN EL TIEMPO DEL VIDEO ---
        video.addEventListener('timeupdate', function() {
            const tiempoFin = tiempoAparicion + duracionVisible;
            const tiempoActual = video.currentTime;

            if (tiempoActual >= tiempoAparicion && tiempoActual < tiempoFin) {
                // APARICI√ìN (Entra de ARRIBA)
                countdownBlock.style.transition = 'opacity 1.9s ease-out, transform 1.9s ease-out'; 
                countdownBlock.classList.remove('from-right', 'to-left'); 
                countdownBlock.classList.add('is-visible'); 

            } else {
                // DESAPARICI√ìN O PRE-INICIO
                if (tiempoActual >= tiempoFin) {
                    // DESAPARICI√ìN (Sale HACIA ABAJO)
                    countdownBlock.classList.remove('is-visible'); 
                    countdownBlock.classList.add('to-left'); 
                    
                } else if (tiempoActual < tiempoAparicion) {
                    // PRE-INICIO (Asegura el estado inicial fuera de vista, ARRIBA)
                    if (!countdownBlock.classList.contains('from-right')) {
                        countdownBlock.style.transition = 'none'; 
                        countdownBlock.classList.remove('is-visible', 'to-left');
                        countdownBlock.classList.add('from-right');
                    }
                }
            }
        });
        
    </script>

</body>
</html>
